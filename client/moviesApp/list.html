<div class="container" ng-controller="MainController as main">

    <div ng-show="main.loadTracker.getRequestCount()">
        <img src="spinner.gif" />
        Loading
    </div>

    <div class="alert alert-danger" ng-show="main.error">
        {{ main.error.statusText }}
    </div>

    <input type="search" ng-model="main.searchTerm" placeholder="Search..." />
    <select ng-model="main.ordering">
        <option value="+title">Title</option>
        <option value="-rating">Rating (best)</option>
        <option value="+rating">Rating (worst)</option>
    </select>
    <button ng-click="main.refreshMovies()">Refresh</button>

    <table class="table table-bordered">
        <tr ng-repeat="movie in main.movies | filter:main.searchTerm | orderBy:main.ordering">
            <td ng-class="main.getStyles(movie)">
                {{movie.title}}
            </td>
            <td>
                <rating value="movie.rating" click="main.increaseRating(movie)">
                </rating>
            </td>
            <td>
                <button class="btn btn-default" ng-click="main.increaseRating(movie)">+</button>
                <button class="btn btn-default" ng-click="main.decreaseRating(movie)">-</button>
                <button class="btn btn-default" ng-click="main.goToEdit(movie)">Edit</button>
                <a class="btn btn-default" href="#/edit/{{movie.id}}">Edit (2)</a>
            </td>
        </tr>
    </table>
</div>
