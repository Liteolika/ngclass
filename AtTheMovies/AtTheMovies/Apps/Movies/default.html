<html ng-app="atTheMovies">
<head>
    <title>At The Movies</title>
    <link href="../../Content/bootstrap.css" rel="stylesheet" />
    <link href="../../Content/Site.css" rel="stylesheet" />

</head>
<body class="container">
    

    <h1>Movies</h1>
    <div ng-controller="MovieController as vm">
        {{ vm.error.data.message }}
        <button ng-click="vm.add()">
            Add new movie
        </button>
        
        <div ng-show="vm.isCreatingMovie">
            <form name="vm.movieForm" ng-submit="vm.saveMovie()" novalidate>
                <input type="text" name="title" ng-model="vm.newMovie.title" required />
                <input type="number" name="length" ng-model="vm.newMovie.length" min="10" max="500" />
                <input type="text" name="releaseDate" ng-model="vm.newMovie.releaseDate" />
                <input type="submit" value="Save" ng-disabled="vm.movieForm.$invalid"/>
            </form>
        </div>
        
        <table class="table table-condensed table-striped" ng-cloak
               ng-show="vm.movies">
            <thead>
                <tr>
                    <td>Title</td>
                    <td>Length</td>
                    <td>Release Date</td>
                    <td>Actions</td>
                </tr>
            </thead>

            <tbody>
                <tr ng-repeat="movie in vm.movies">
                    <td>
                        {{movie.title}}

                    </td>
                    <td>{{movie.length}}</td>
                    <td>{{movie.releaseDate | date:short}}</td>
                    <td>
                        <button class="glyphicon glyphicon-plus"
                                ng-click="vm.increment($index)"></button>
                        <button class="glyphicon glyphicon-minus"
                                ng-click="vm.decrement(movie)"></button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <script src="../../Scripts/angular.js"></script>
    <script src="app.js"></script>
    <script src="services/movieDataService.js"></script>
    <script src="controllers/MovieController.js"></script>
</body>
</html>
